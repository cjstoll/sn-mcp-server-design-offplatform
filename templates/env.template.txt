# MCP Server Environment Configuration Template
# Copy this file to .env and fill in your values

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server port (default: 3000)
SERVER_PORT=3000

# Server host (default: 0.0.0.0 for all interfaces)
SERVER_HOST=0.0.0.0

# Node environment (development, staging, production)
NODE_ENV=development

# Server URL (used for OAuth issuer and metadata)
# Example: https://mcp.yourdomain.com
SERVER_URL=https://mcp.example.com

# =============================================================================
# JWT CONFIGURATION (REQUIRED)
# =============================================================================

# JWT secret for signing tokens (REQUIRED - minimum 256 bits recommended)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT issuer (typically same as SERVER_URL)
JWT_ISSUER=https://mcp.example.com

# JWT audience (optional - for additional validation)
JWT_AUDIENCE=https://instance.service-now.com

# Access token lifetime in seconds (default: 3600 = 1 hour)
ACCESS_TOKEN_LIFETIME=3600

# Refresh token lifetime in seconds (default: 2592000 = 30 days)
REFRESH_TOKEN_LIFETIME=2592000

# Authorization code lifetime in seconds (default: 300 = 5 minutes)
AUTH_CODE_LIFETIME=300

# =============================================================================
# OAUTH CONFIGURATION
# =============================================================================

# Dynamic Client Registration authorization token (optional but recommended)
# Only clients with this token can register new OAuth clients
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
DCR_AUTH_TOKEN=

# =============================================================================
# SERVICENOW CONFIGURATION
# =============================================================================

# ServiceNow instance URL
# Example: https://dev12345.service-now.com
SERVICENOW_INSTANCE=https://instance.service-now.com

# ServiceNow client ID (after DCR registration)
SERVICENOW_CLIENT_ID=

# ServiceNow client secret (after DCR registration)
SERVICENOW_CLIENT_SECRET=

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis host
REDIS_HOST=localhost

# Redis port
REDIS_PORT=6379

# Redis password (leave empty if no password)
REDIS_PASSWORD=

# Redis database number (0-15)
REDIS_DB=0

# Redis connection timeout (milliseconds)
REDIS_TIMEOUT=5000

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limit window in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# OAuth endpoint rate limit (more restrictive, default: 10)
OAUTH_RATE_LIMIT_MAX=10

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Client storage type: file, redis, postgresql, mongodb, firestore
# Default: file
CLIENT_STORAGE_TYPE=file

# File-based storage path (if using file storage)
CLIENT_STORAGE_PATH=./data/registered_clients.json

# Database connection string (if using postgresql/mongodb)
# PostgreSQL example: postgresql://user:password@localhost:5432/mcp_server
# MongoDB example: mongodb://localhost:27017/mcp_server
DATABASE_URL=

# =============================================================================
# LLM CONFIGURATION
# =============================================================================

# Ollama API URL (for local LLM integration)
OLLAMA_API_URL=http://localhost:11434

# Default LLM model
DEFAULT_LLM_MODEL=tinyllama

# LLM request timeout (milliseconds)
LLM_TIMEOUT=30000

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed CORS origins (comma-separated)
# Example: https://instance.service-now.com,https://dev.service-now.com
CORS_ORIGINS=https://instance.service-now.com

# =============================================================================
# LOGGING
# =============================================================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# Enable audit logging (true/false)
AUDIT_LOGGING=true

# Audit log file path
AUDIT_LOG_PATH=./logs/audit.log

# =============================================================================
# SECURITY
# =============================================================================

# Enable HTTPS (true/false) - should be true in production
ENABLE_HTTPS=false

# SSL certificate path (if ENABLE_HTTPS=true)
SSL_CERT_PATH=

# SSL key path (if ENABLE_HTTPS=true)
SSL_KEY_PATH=

# Require PKCE for all authorization requests (recommended: true)
REQUIRE_PKCE=true

# =============================================================================
# GOOGLE CLOUD CONFIGURATION (TypeScript template only)
# =============================================================================

# Google Cloud Project ID
GCP_PROJECT_ID=

# Firestore collection name for client storage
FIRESTORE_COLLECTION=oauth_clients

# Google Cloud Region
GCP_REGION=us-central1

# =============================================================================
# ADDITIONAL API KEYS (Optional - for backward compatibility)
# =============================================================================

# Legacy API key authentication (if supporting non-OAuth clients)
# These are deprecated in favor of OAuth 2.1
API_KEY_XAPI=
API_KEY_APIKEY=
API_KEY_AUTH=

# =============================================================================
# DEVELOPMENT/DEBUGGING
# =============================================================================

# Enable verbose logging (true/false)
VERBOSE_LOGGING=false

# Enable request/response logging (true/false)
LOG_REQUESTS=true

# Enable token validation logging (true/false)
LOG_TOKEN_VALIDATION=false
